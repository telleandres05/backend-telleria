<h1 class="mb-4">Carrito de Compras</h1>

{{#if hasProducts}}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Cantidad</th>
        <th>Subtotal</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each cart.products}}
        <tr>
          <td>{{this.product.title}}</td>
          <td>${{this.product.price}}</td>
          <td>{{this.quantity}}</td>
          <td>${{multiply this.product.price this.quantity}}</td>
          <td>
            <form method="POST" action="/api/carts/{{../cart._id}}/products/{{this.product._id}}?_method=DELETE">
              <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
            </form>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  <h4>Total: ${{total}}</h4>
  <form method="POST" action="/api/carts/{{cart._id}}?_method=DELETE">
    <button type="submit" class="btn btn-warning">Vaciar carrito</button>
  </form>
{{else}}
  <p>No hay productos en el carrito.</p>
{{/if}}
